<div class="fixed inset-0 -z-10 bg-gradient-to-br from-slate-50 to-blue-50/30"></div>

<div class="container-fluid max-w-6xl mx-auto py-8 px-4 animate-[fadeIn_0.8s_ease-out]">

  <div class="bg-white/80 backdrop-blur-xl rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,82,204,0.1)] p-8 mb-10 border border-white">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
      <div class="flex items-center gap-6">
        <div class="w-20 h-20 bg-gradient-to-tr from-[#004a99] to-[#0072ff] rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-lg shadow-blue-500/30">
          {{ name.charAt(0).toUpperCase() }}
        </div>
        <div>
          <h2 class="text-3xl font-black text-[#172b4d] tracking-tight mb-1">{{ name }}</h2>
          <p class="text-slate-400 font-medium flex items-center gap-2">
            <i class="bi bi-envelope-at text-[#004a99]"></i> {{ email }}
          </p>
        </div>
      </div>

      <div class="flex flex-col items-end gap-3">
        <span class="bg-slate-100 px-4 py-2 rounded-xl text-xs font-bold text-slate-500 uppercase tracking-widest">
          ID: {{ id }}
        </span>
        @if (this.auth.roles.includes("ADMIN")) {
          <button (click)="ajc(id)"
                  class="bg-[#004a99] hover:bg-[#003366] text-white px-6 py-3 rounded-xl font-black text-sm transition-all hover:-translate-y-1 shadow-lg shadow-blue-500/20 flex items-center gap-2">
            <i class="bi bi-plus-circle-fill"></i> NOUVEAU COMPTE
          </button>
        }
      </div>
    </div>
  </div>

  <div class="flex items-center gap-4 mb-8">
    <h3 class="text-2xl font-black text-[#004a99] tracking-tighter uppercase">Comptes Bancaires</h3>
    <div class="h-[2px] flex-1 bg-gradient-to-r from-[#004a99]/20 to-transparent"></div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <div *ngFor="let acc of Comptes"
         class="group relative bg-white rounded-[2.5rem] shadow-[0_10px_30px_rgba(0,0,0,0.03)] border border-slate-100 overflow-hidden transition-all hover:shadow-[0_20px_40px_rgba(0,0,0,0.08)] hover:-translate-y-2">

      <div class="bg-slate-50 px-8 py-4 border-b border-slate-100 flex justify-between items-center">
        <span class="font-mono text-xs font-bold text-slate-400">RIB: {{ acc.id }}</span>
        <span [class]="acc.status === 'ACTIVATED' ? 'text-emerald-500' : 'text-amber-500'" class="flex items-center gap-1 text-[10px] font-black uppercase tracking-tighter">
          <span class="w-2 h-2 rounded-full animate-pulse bg-current"></span>
          {{ acc.status }}
        </span>
      </div>

      <div class="p-8">
        <div class="mb-8">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1">Solde disponible</p>
          <h4 class="text-4xl font-black text-[#172b4d] tracking-tighter">
            {{ acc.sold | number:'1.2-2' }} <span class="text-lg text-slate-300 font-medium">{{ acc.devise }}</span>
          </h4>
        </div>

        <div class="grid grid-cols-2 gap-6 mb-8 bg-slate-50/50 p-5 rounded-2xl border border-slate-100">
          <div>
            <p class="text-[9px] font-black text-slate-400 uppercase mb-1">Type de compte</p>
            <p class="text-sm font-bold text-[#004a99]">{{ acc.decouvert == null ? 'ÉPARGNE' : 'COURANT' }}</p>
          </div>
          <div>
            <p class="text-[9px] font-black text-slate-400 uppercase mb-1">Date Création</p>
            <p class="text-sm font-bold text-slate-700">{{ acc.dateCreation | date:'dd/MM/yyyy' }}</p>
          </div>
          <div>
            @if (acc.decouvert==null) {
              <p class="text-[9px] font-black text-emerald-500 uppercase mb-1">Taux Intérêt</p>
              <p class="text-sm font-black text-emerald-600">{{acc.tauxInteret}}%</p>
            } @else {
              <p class="text-[9px] font-black text-[#ff3b30] uppercase mb-1">Découvert</p>
              <p class="text-sm font-black text-[#ff3b30]">{{acc.decouvert}} {{ acc.devise }}</p>
            }
          </div>
        </div>

        <div class="flex flex-wrap gap-2">
          <button (click)="ops(acc.id)"
                  class="flex-1 bg-[#004a99] hover:bg-[#003366] text-white py-3 rounded-xl font-bold text-xs transition-all shadow-md shadow-blue-500/10">
            DÉTAILS
          </button>

          @if (this.auth.roles.includes("ADMIN")) {
            @if (acc.status=="ACTIVATED") {
              <button (click)="suspendre(acc.id)"
                      class="px-4 border-2 border-amber-500 text-amber-500 hover:bg-amber-500 hover:text-white py-3 rounded-xl font-bold text-[10px] uppercase transition-all">
                Suspendre
              </button>
            } @else {
              <button (click)="activer(acc.id)"
                      class="px-4 border-2 border-emerald-500 text-emerald-500 hover:bg-emerald-500 hover:text-white py-3 rounded-xl font-bold text-[10px] uppercase transition-all">
                Activer
              </button>
            }
            <button (click)="delete(acc.id)"
                    class="px-4 border-2 border-[#ff3b30] text-[#ff3b30] hover:bg-[#ff3b30] hover:text-white py-3 rounded-xl font-bold text-[10px] uppercase transition-all">
              <i class="bi bi-trash"></i>
            </button>
          }
        </div>
      </div>
    </div>
  </div>

</div>
