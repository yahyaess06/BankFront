<div class="container mx-auto py-6">

  <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">

    <div class="flex justify-between items-center mb-6">
      <h5 class="text-indigo-600 font-semibold text-xl flex items-center">
        <i class="bi bi-people me-2"></i> Customers
      </h5>
    </div>


    <form [formGroup]="searchFormGroup" (ngSubmit)="getClients()" class="mb-6">
      <div class="flex gap-4">
        <input type="text"
               class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
               placeholder="Search by keyword..."
               formControlName="keyword">
        <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-2 rounded-lg flex items-center">
          <i class="bi bi-search me-2"></i> Search
        </button>
      </div>
    </form>


    <div class="lg:flex gap-6">


      <div class="flex-2 overflow-x-auto">
        <table class="min-w-full border border-gray-200 rounded-lg overflow-hidden">
          <thead class="bg-indigo-100 text-indigo-700 font-semibold">
          <tr>
            <th class="px-4 py-2 text-right">#</th>
            <th class="px-4 py-2 text-right">Full Name</th>
            <th class="px-4 py-2 text-right">Email</th>
            <th class="px-4 py-2 text-center">Actions</th>
          </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
          <tr *ngFor="let c of clients" class="hover:bg-indigo-50">
            <td class="px-4 py-2 text-right">{{ c.id }}</td>
            <td class="px-4 py-2 text-right font-semibold">{{ c.name }}</td>
            <td class="px-4 py-2 text-right text-gray-500">{{ c.email }}</td>
            <td class="px-4 py-2 text-center space-x-1">
              <button class="btn btn-sm btn-warning me-1" [routerLink]="['/admin/customers/edit', c.id]">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-outline-danger btn-sm me-1" (click)="handleDeleteCustomer(c)">
                <i class="bi bi-trash"></i>
              </button>
              <button class="btn btn-outline-success btn-sm" (click)="handleCustomerAccounts(c)">
                <i class="bi bi-wallet2"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <form (ngSubmit)="opps()" class="flex-1 bg-gray-50 p-6 rounded-xl border border-gray-200">
        <label class="block font-semibold mb-2 text-gray-700">Votre RIB :</label>
        <input type="text" name="nom" [(ngModel)]="acc_id"
               class="w-full rounded-lg border border-gray-300 px-4 py-2 mb-2 text-gray-900 placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
               placeholder="ex : f46af49b-7d0e-4060-99c8-cb3ead7d00be" required>
        <span class="text-red-600 font-semibold">{{ eror }}</span><br>
        <button class="mt-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-2 rounded-lg">
          Chercher
        </button>
      </form>

    </div>


    <div class="overflow-x-auto mt-6">
      <table class="min-w-full border border-gray-200 rounded-lg overflow-hidden">
        <thead class="bg-indigo-600 text-white font-semibold">
        <tr>
          <th class="px-4 py-2">Date D'operation</th>
          <th class="px-4 py-2">Montant</th>
          <th class="px-4 py-2">Type d'operation</th>
          <th class="px-4 py-2">RIB de Compte Bancaire</th>
        </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          @for (op of ops; track op){
        <tr class="hover:bg-indigo-50">
          <td class="px-4 py-2">{{op.dateOp}}</td>
          <td class="px-4 py-2">{{op.montant}}</td>
          <td class="px-4 py-2">{{op.type_operation}}</td>
          <td class="px-4 py-2">{{op.compteId}}</td>
        </tr>
        }
        </tbody>
      </table>
    </div>

  </div>
</div>
